{"version":3,"sources":["webpack:///./Modules/SmartChart/Components/bottom-widgets.jsx","webpack:///./Modules/SmartChart/Components/control-widgets.jsx","webpack:///./Modules/SmartChart/Components/Markers/marker.jsx","webpack:///./Modules/SmartChart/Components/top-widgets.jsx","webpack:///./Modules/SmartChart/Helpers/symbol.js","webpack:///./Modules/SmartChart/Containers/smart-chart.jsx"],"names":["BottomWidgets","Digits","className","propTypes","PropTypes","node","ControlWidgets","updateChartType","updateGranularity","Fragment","onChange","searchInputClassName","func","ChartMarker","marker_config","marker_content_props","is_bottom_widget_visible","ContentComponent","marker_props","markerRef","ref","y","margin","div","style","height","zIndex","setPosition","epoch","x","price","toJS","object","TopWidgets","InfoBox","is_title_enabled","onSymbolChange","enabled","bool","symbolChange","symbol","target","name","value","setSmartChartsPublicPath","getUrlBase","Chart","chartControlsWidgets","props","topWidgets","bottomWidgets","React","Component","this","onMount","onUnmount","barriers","barriers_array","should_show_bottom_widgets","is_contract_mode","chartStatusListener","getChartStatus","chartType","chart_type","endEpoch","end_epoch","id","chart_id","isMobile","is_mobile","enabledNavigationWidget","granularity","requestAPI","wsSendRequest","requestForget","wsForget","requestForgetStream","wsForgetStream","requestSubscribe","wsSubscribe","settings","showLastDigitStats","should_show_last_digit_stats","startEpoch","start_epoch","scrollToEpoch","scroll_to_epoch","isConnectionOpened","is_socket_opened","clearChart","should_clear_chart","importedLayout","should_import_layout","trade_chart_layout","onExportLayout","should_export_layout","exportLayout","isStaticChart","is_static_chart","shouldFetchTradingTimes","refreshActiveSymbols","should_refresh_active_symbols","markers_array","map","marker","idx","key","content_config","array","string","number","replay_controls","connect","modules","ui","common","smart_chart"],"mappings":"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","file":"js/smart_chart.a28eb57bbddd29245a13.js","sourcesContent":["import PropTypes      from 'prop-types';\nimport React          from 'react';\n\nconst BottomWidgets = ({\n    Digits,\n}) => (\n    <div className='bottom-widgets'>\n        {Digits}\n    </div>\n);\n\nBottomWidgets.propTypes = {\n    Digits: PropTypes.node,\n};\n\nexport default BottomWidgets;\n","import {\n    ChartSize,\n    ChartTypes,\n    Comparison,\n    CrosshairToggle,\n    DrawTools,\n    Share,\n    StudyLegend,\n    Timeperiod,\n    Views }           from 'smartcharts-beta';\nimport PropTypes      from 'prop-types';\nimport React          from 'react';\n\nconst ControlWidgets = ({\n    updateChartType,\n    updateGranularity,\n}) => (\n    <React.Fragment>\n        <CrosshairToggle />\n        <ChartTypes onChange={updateChartType} />\n        <StudyLegend searchInputClassName='data-hj-whitelist' />\n        <Comparison searchInputClassName='data-hj-whitelist' />\n        <DrawTools />\n        <Views searchInputClassName='data-hj-whitelist' />\n        <Share />\n        <Timeperiod onChange={updateGranularity} />\n        <ChartSize />\n    </React.Fragment>\n);\n\nControlWidgets.propTypes = {\n    updateChartType  : PropTypes.func,\n    updateGranularity: PropTypes.func,\n};\n\nexport default ControlWidgets;\n","import { toJS }       from 'mobx';\nimport PropTypes      from 'prop-types';\nimport React          from 'react';\nimport { FastMarker } from 'smartcharts-beta';\n\nconst ChartMarker = ({\n    marker_config,\n    marker_content_props,\n    is_bottom_widget_visible,\n}) => {\n    const { ContentComponent, ...marker_props } = marker_config;\n\n    // TODO:\n    //  - rename x to epoch\n    //  - rename y to price\n    const onRef = ref => {\n        if (ref) {\n            // NOTE: null price means vertical line.\n            if (!marker_props.y) {\n                const margin =\n                    (is_bottom_widget_visible ? 115 : 0) + // digit contracts have a widget at the bottom\n                    24;                                    // height of line marker icon\n\n                ref.div.style.height =  `calc(100% - ${margin}px)`;\n                ref.div.style.zIndex = '-1';\n            }\n            ref.setPosition({\n                epoch: +marker_props.x,\n                price: +marker_props.y,\n            });\n        }\n    };\n\n    return (\n        <FastMarker\n            markerRef={onRef}\n        >\n            <ContentComponent {...toJS(marker_content_props)} />\n        </FastMarker>\n    );\n};\n\nChartMarker.propTypes = {\n    marker_config       : PropTypes.object,\n    marker_content_props: PropTypes.object,\n};\n\nexport default ChartMarker;\n","import {\n    AssetInformation,\n    ChartTitle }      from 'smartcharts-beta';\nimport PropTypes      from 'prop-types';\nimport React          from 'react';\n\nconst TopWidgets = ({\n    InfoBox,\n    is_title_enabled = true,\n    onSymbolChange,\n}) => (\n    <React.Fragment>\n        {InfoBox}\n        <ChartTitle enabled={is_title_enabled} onChange={onSymbolChange} searchInputClassName='data-hj-whitelist' />\n        <AssetInformation />\n    </React.Fragment>\n);\n\nTopWidgets.propTypes = {\n    InfoBox         : PropTypes.node,\n    is_title_enabled: PropTypes.bool,\n    onSymbolChange  : PropTypes.func,\n};\n\nexport default TopWidgets;\n","export const symbolChange = (onSymbolChange) => (\n    onSymbolChange &&\n    ((symbol) => {\n        onSymbolChange({\n            target: {\n                name : 'symbol',\n                value: symbol,\n            },\n        });\n    })\n);\n","import {\n    SmartChart,\n    setSmartChartsPublicPath } from 'smartcharts-beta';\nimport PropTypes               from 'prop-types';\nimport React                   from 'react';\nimport { getUrlBase }          from '_common/url';\nimport { connect }             from 'Stores/connect';\nimport BottomWidgets           from '../Components/bottom-widgets.jsx';\nimport ControlWidgets          from '../Components/control-widgets.jsx';\nimport ChartMarker             from '../Components/Markers/marker.jsx';\nimport TopWidgets              from '../Components/top-widgets.jsx';\nimport { symbolChange }        from '../Helpers/symbol';\n\nsetSmartChartsPublicPath(getUrlBase('/js/smartcharts/'));\n\nclass Chart extends React.Component {\n    componentDidMount() { this.props.onMount(); }\n\n    componentWillUnmount() { this.props.onUnmount(); }\n\n    chartControlsWidgets = () => (\n        <ControlWidgets\n            updateChartType={this.props.updateChartType}\n            updateGranularity={this.props.updateGranularity}\n        />\n    );\n\n    topWidgets = () => (\n        <TopWidgets\n            InfoBox={this.props.InfoBox}\n            is_title_enabled={this.props.is_title_enabled}\n            onSymbolChange={symbolChange(this.props.onSymbolChange)}\n        />\n    );\n\n    bottomWidgets = () => (\n        <BottomWidgets Digits={this.props.Digits} />\n    );\n\n    render() {\n        return (\n            <SmartChart\n                barriers={this.props.barriers_array}\n                bottomWidgets={this.props.should_show_bottom_widgets ?\n                    this.bottomWidgets : null}\n                chartControlsWidgets={this.props.is_contract_mode ? null : this.chartControlsWidgets}\n                chartStatusListener={this.props.getChartStatus}\n                chartType={this.props.chart_type}\n                endEpoch={this.props.end_epoch}\n                margin={this.props.margin || null}\n                id={this.props.chart_id}\n                isMobile={this.props.is_mobile}\n                enabledNavigationWidget={this.props.is_contract_mode}\n                granularity={this.props.granularity}\n                requestAPI={this.props.wsSendRequest}\n                requestForget={this.props.wsForget}\n                requestForgetStream={this.props.wsForgetStream}\n                requestSubscribe={this.props.wsSubscribe}\n                settings={this.props.settings}\n                showLastDigitStats={this.props.should_show_last_digit_stats}\n                startEpoch={this.props.start_epoch}\n                scrollToEpoch={this.props.scroll_to_epoch}\n                symbol={this.props.symbol}\n                topWidgets={this.topWidgets}\n                isConnectionOpened={this.props.is_socket_opened}\n                clearChart={this.props.should_clear_chart}\n                importedLayout={this.props.should_import_layout ? this.props.trade_chart_layout : null}\n                onExportLayout={this.props.should_export_layout ? this.props.exportLayout : null}\n                isStaticChart={this.props.is_static_chart}\n                shouldFetchTradingTimes={!this.props.end_epoch}\n                refreshActiveSymbols={this.props.should_refresh_active_symbols}\n            >\n                { this.props.markers_array.map((marker, idx) => (\n                    <ChartMarker\n                        key={idx}\n                        marker_config={marker.marker_config}\n                        marker_content_props={marker.content_config}\n                        is_bottom_widget_visible={this.props.should_show_bottom_widgets}\n                    />\n                ))}\n            </SmartChart>\n        );\n    }\n}\n\nChart.propTypes = {\n    barriers_array               : PropTypes.array,\n    BottomWidgets                : PropTypes.node,\n    chart_id                     : PropTypes.string,\n    chart_type                   : PropTypes.string,\n    end_epoch                    : PropTypes.number,\n    exportLayout                 : PropTypes.func,\n    getChartStatus               : PropTypes.func,\n    granularity                  : PropTypes.number,\n    InfoBox                      : PropTypes.node,\n    is_contract_mode             : PropTypes.bool,\n    is_mobile                    : PropTypes.bool,\n    is_socket_opened             : PropTypes.bool,\n    is_static_chart              : PropTypes.bool,\n    is_title_enabled             : PropTypes.bool,\n    margin                       : PropTypes.number,\n    markers_array                : PropTypes.array,\n    onMount                      : PropTypes.func,\n    onSymbolChange               : PropTypes.func,\n    onUnmount                    : PropTypes.func,\n    replay_controls              : PropTypes.object,\n    scroll_to_epoch              : PropTypes.number,\n    settings                     : PropTypes.object,\n    should_clear_chart           : PropTypes.bool,\n    should_export_layout         : PropTypes.bool,\n    should_import_layout         : PropTypes.bool,\n    should_refresh_active_symbols: PropTypes.bool,\n    should_show_last_digit_stats : PropTypes.bool,\n    start_epoch                  : PropTypes.number,\n    symbol                       : PropTypes.string,\n    trade_chart_layout           : PropTypes.object,\n    updateChartType              : PropTypes.func,\n    updateGranularity            : PropTypes.func,\n    wsForget                     : PropTypes.func,\n    wsForgetStream               : PropTypes.func,\n    wsSendRequest                : PropTypes.func,\n    wsSubscribe                  : PropTypes.func,\n};\n\nexport default connect(\n    ({ modules, ui, common }) => ({\n        is_socket_opened             : common.is_socket_opened,\n        barriers_array               : modules.smart_chart.barriers_array,\n        exportLayout                 : modules.smart_chart.exportLayout,\n        getChartStatus               : modules.smart_chart.getChartStatus,\n        is_contract_mode             : modules.smart_chart.is_contract_mode,\n        is_title_enabled             : modules.smart_chart.is_title_enabled,\n        margin                       : modules.smart_chart.margin,\n        markers_array                : modules.smart_chart.markers_array,\n        onMount                      : modules.smart_chart.onMount,\n        onUnmount                    : modules.smart_chart.onUnmount,\n        settings                     : modules.smart_chart.settings,\n        should_clear_chart           : modules.smart_chart.should_clear_chart,\n        should_export_layout         : modules.smart_chart.should_export_layout,\n        should_import_layout         : modules.smart_chart.should_import_layout,\n        should_refresh_active_symbols: modules.smart_chart.should_refresh_active_symbols,\n        trade_chart_layout           : modules.smart_chart.trade_chart_layout,\n        updateChartType              : modules.smart_chart.updateChartType,\n        updateGranularity            : modules.smart_chart.updateGranularity,\n        wsForget                     : modules.smart_chart.wsForget,\n        wsForgetStream               : modules.smart_chart.wsForgetStream,\n        wsSendRequest                : modules.smart_chart.wsSendRequest,\n        wsSubscribe                  : modules.smart_chart.wsSubscribe,\n        is_mobile                    : ui.is_mobile,\n    })\n)(Chart);\n"],"sourceRoot":""}